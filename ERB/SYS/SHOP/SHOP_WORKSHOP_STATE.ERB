;---------------------------------------------------------
; SHOP_WORKSHOP4 技師パッチ 工房イベントファイル その4
;---------------------------------------------------------
;中毒者曰く：
;判定用、素質・能力・経験・刻印判断関数
;※現在一部素質・能力・経験・刻印について未対応な暫定版
;  具体的にはYM Mk0 proto2時代に存在したものについてのみ対応
;
;以下関数群
;@JUDGE_WORKSHOP_STATE       工房結果判定用ステータスチェック
;@JUDGE_WORKSHOP_CONGENIAL   工房相性確認
;@JUDGE_WORKSHOP_ENVIRONMENT 工房環境確認

;=======================================;
;JUDGE_WORKSHOP_STATE 工房結果判定用ステータスチェック
; CFLAG:COUNT:695 やる気
; CFLAG:COUNT:696 エロス
; CFLAG:COUNT:697 誘惑
; CFLAG:COUNT:698 抵抗
; CFLAG:COUNT:699 自慰
;=======================================;
@JUDGE_WORKSHOP_STATE
 CFLAG:COUNT:695 = 0
 CFLAG:COUNT:696 = 0
 CFLAG:COUNT:697 = 0
 CFLAG:COUNT:698 = 0
 CFLAG:COUNT:699 = 0
;能力
;Ｃ感覚
IF ABL:COUNT:C감각
    CFLAG:COUNT:696 += ABL:COUNT:C감각 * 1
ENDIF
;Ｖ感覚
IF ABL:COUNT:V감각
    CFLAG:COUNT:696 += ABL:COUNT:V감각 * 1
ENDIF
;Ａ感覚
IF ABL:COUNT:A감각
    CFLAG:COUNT:696 += ABL:COUNT:A감각 * 1
ENDIF
;Ｂ感覚
IF ABL:COUNT:B감각
    CFLAG:COUNT:696 += ABL:COUNT:B감각 * 1
ENDIF
;従順
IF ABL:COUNT:순종
    CFLAG:COUNT:695 += ABL:COUNT:순종 * 3
ENDIF
;欲望
IF ABL:COUNT:욕망
    CFLAG:COUNT:696 += ABL:COUNT:욕망 * 3
    CFLAG:COUNT:697 += ABL:COUNT:욕망 * 3
    CFLAG:COUNT:699 += ABL:COUNT:욕망 * 1
ENDIF
;技巧
IF ABL:COUNT:기교
    CFLAG:COUNT:695 += ABL:COUNT:기교 * 1
    CFLAG:COUNT:696 += ABL:COUNT:기교 * 2
    CFLAG:COUNT:699 += ABL:COUNT:기교 * 1
ENDIF
;奉仕精神
IF ABL:COUNT:봉사정신
    CFLAG:COUNT:695 += ABL:COUNT:봉사정신 * 3
    CFLAG:COUNT:698 -= ABL:COUNT:봉사정신 * 3
ENDIF
;露出癖
IF ABL:COUNT:노출증
    CFLAG:COUNT:696 += ABL:COUNT:노출증 * 3
    CFLAG:COUNT:699 += ABL:COUNT:노출증 * 3
ENDIF
;マゾっ気
IF ABL:COUNT:마조끼
    CFLAG:COUNT:695 += ABL:COUNT:마조끼 * 2
    CFLAG:COUNT:696 += ABL:COUNT:마조끼 * 2
    CFLAG:COUNT:697 += ABL:COUNT:마조끼 * 2
    CFLAG:COUNT:698 -= ABL:COUNT:마조끼 * 2
ENDIF
;レズっ気
IF ABL:COUNT:레즈끼
    CFLAG:COUNT:697 += ABL:COUNT:레즈끼 * 3
    CFLAG:COUNT:698 -= ABL:COUNT:레즈끼 * 3
ENDIF
;自慰中毒
IF ABL:COUNT:자위중독
    CFLAG:COUNT:699 += ABL:COUNT:자위중독 * 3
ENDIF
;精液中毒
IF ABL:COUNT:정액중독
    CFLAG:COUNT:696 += ABL:COUNT:레즈중독 * 3
ENDIF
;レズ中毒
IF ABL:COUNT:레즈중독
    CFLAG:COUNT:696 += ABL:COUNT:레즈중독 * 3
    CFLAG:COUNT:697 += ABL:COUNT:레즈중독 * 3
    CFLAG:COUNT:698 -= ABL:COUNT:레즈중독 * 3
ENDIF
;噴乳中毒
IF ABL:COUNT:분유중독
    CFLAG:COUNT:696 += ABL:COUNT:분유중독 * 3
    CFLAG:COUNT:697 += ABL:COUNT:분유중독 * 3
    CFLAG:COUNT:699 += ABL:COUNT:분유중독 * 3
ENDIF
;触手中毒
IF ABL:COUNT:촉수중독
    CFLAG:COUNT:696 += ABL:COUNT:촉수중독 * 3
    CFLAG:COUNT:697 += ABL:COUNT:촉수중독 * 3
    CFLAG:COUNT:699 += ABL:COUNT:촉수중독 * 3
ENDIF
;素質
;処女
IF TALENT:COUNT:처녀
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:697 -= 5
    CFLAG:COUNT:698 += 5
ENDIF
;臆病
IF TALENT:COUNT:겁쟁이
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:698 -= 5
ENDIF
;反抗的
IF TALENT:COUNT:반항적
    CFLAG:COUNT:695 -= 5
    CFLAG:COUNT:698 += 5
ENDIF
;気丈
IF TALENT:COUNT:꿋꿋함
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:697 += 3
    CFLAG:COUNT:698 += 5
ENDIF
;素直
IF TALENT:COUNT:솔직함
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:697 += 3
    CFLAG:COUNT:698 += 3
ENDIF
;大人しい
IF TALENT:COUNT:얌전함
    CFLAG:COUNT:695 += 2
ENDIF
;生意気
IF TALENT:COUNT:건방짐
    CFLAG:COUNT:695 -= 3
    CFLAG:COUNT:697 += 3
    CFLAG:COUNT:698 += 3
ENDIF
;プライド高い
IF TALENT:COUNT:프라이드가높음
    CFLAG:COUNT:695 -= 5
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 -= 5
ENDIF
;プライド低い
IF TALENT:COUNT:프라이드가낮음
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
ENDIF
;自制心
IF TALENT:COUNT:자제심
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:699 -= 5
ENDIF
;無関心
IF TALENT:COUNT:무관심
    CFLAG:COUNT:695 -= 5
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:699 -= 5
ENDIF
;感情乏しい
IF TALENT:COUNT:감정결여
    CFLAG:COUNT:695 -= 3
    CFLAG:COUNT:696 -= 3
    CFLAG:COUNT:699 -= 3
ENDIF
;好奇心
IF TALENT:COUNT:호기심
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:696 += 3
    CFLAG:COUNT:697 += 3
    CFLAG:COUNT:698 += 3
ENDIF
;保守的
IF TALENT:COUNT:보수적
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:698 += 5
ENDIF
;楽観的
IF TALENT:COUNT:낙관적
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:696 += 3
    CFLAG:COUNT:698 += 3
ENDIF
;悲観的
IF TALENT:COUNT:비관적
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:698 -= 3
ENDIF
;一線越えない
IF TALENT:COUNT:일선을넘지않음
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 -= 5
ENDIF
;目立ちたがり
IF TALENT:COUNT:튀고싶어함
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:697 += 5
ENDIF
;貞操観念
IF TALENT:COUNT:정조관념
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:698 += 5
ENDIF
;貞操無頓着
IF TALENT:COUNT:정조관둔감
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 -= 5
ENDIF
;抑圧
IF TALENT:COUNT:억압
    CFLAG:COUNT:695 -= 3
    CFLAG:COUNT:696 -= 3
    CFLAG:COUNT:697 -= 3
    CFLAG:COUNT:698 += 3
    CFLAG:COUNT:699 -= 3
ENDIF
;解放
IF TALENT:COUNT:해방
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 -= 3
    CFLAG:COUNT:699 += 5
ENDIF
;抵抗
IF TALENT:COUNT:저항
    CFLAG:COUNT:695 -= 5
ENDIF
;恥じらい
IF TALENT:COUNT:부끄럼쟁이
    CFLAG:COUNT:696 -= 2
    CFLAG:COUNT:697 -= 2
    CFLAG:COUNT:698 += 2
    CFLAG:COUNT:699 -= 2
ENDIF
;恥薄い
IF TALENT:COUNT:부끄럼없음
    CFLAG:COUNT:696 += 2
    CFLAG:COUNT:697 += 2
    CFLAG:COUNT:698 -= 2
    CFLAG:COUNT:699 += 2
ENDIF
;弱味
IF TALENT:COUNT:약점
    CFLAG:COUNT:695 += 5
ENDIF
;痛みに弱い
IF TALENT:COUNT:아픔에약함
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:698 -= 5
ENDIF
;痛みに強い
IF TALENT:COUNT:아픔에강함
    CFLAG:COUNT:698 += 3
ENDIF
;濡れやすい
IF TALENT:COUNT:젖기쉬움
ENDIF
;濡れにくい
IF TALENT:COUNT:젖기어려움
    CFLAG:COUNT:696 -= 1
    CFLAG:COUNT:697 += 1
    CFLAG:COUNT:699 -= 1
ENDIF
;媚薬中毒
IF TALENT:COUNT:미약중독
    CFLAG:COUNT:696 += 5
ENDIF
;習得早い
IF TALENT:COUNT:습득빠름
    CFLAG:COUNT:695 += 5
ENDIF
;習得遅い
IF TALENT:COUNT:습득느림
    CFLAG:COUNT:695 -= 5
ENDIF
;舌使い
IF TALENT:COUNT:혀놀림
    CFLAG:COUNT:696 += 3
ENDIF
;自慰しやすい
IF TALENT:COUNT:자위하기쉬움
    CFLAG:COUNT:699 += 5
ENDIF
;汚臭敏感
IF TALENT:COUNT:냄새민감
    CFLAG:COUNT:698 += 5
ENDIF
;献身的
IF TALENT:COUNT:헌신적
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 -= 5
ENDIF
;快感に素直
IF TALENT:COUNT:쾌감에솔직
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;快感の否定
IF TALENT:COUNT:쾌감을부정
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 -= 5
ENDIF
;倒錯的
IF TALENT:COUNT:도착적
    CFLAG:COUNT:695 += 3
    CFLAG:COUNT:696 += 3
    CFLAG:COUNT:697 += 3
    CFLAG:COUNT:698 -= 3
    CFLAG:COUNT:699 += 3
ENDIF
;サド
IF TALENT:COUNT:새드
    CFLAG:COUNT:697 += 5
ENDIF
;マゾ
IF TALENT:COUNT:마조
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;中毒しやすい
IF TALENT:COUNT:중독되기쉬움
    CFLAG:COUNT:695 += 5
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:699 += 5
ENDIF
;小悪魔
IF TALENT:COUNT:소악마
    CFLAG:COUNT:696 += 3
ENDIF
;Ｃ敏感
IF TALENT:COUNT:C민감
    CFLAG:COUNT:696 += 1
ENDIF
;Ｃ鈍感
IF TALENT:COUNT:C둔감
    CFLAG:COUNT:696 -= 1
ENDIF
;Ｖ敏感
IF TALENT:COUNT:V민감
    CFLAG:COUNT:696 += 1
ENDIF
;Ｖ鈍感
IF TALENT:COUNT:V둔감
    CFLAG:COUNT:696 -= 1
ENDIF
;Ａ敏感
IF TALENT:COUNT:A민감
    CFLAG:COUNT:696 += 1
ENDIF
;Ａ鈍感
IF TALENT:COUNT:A둔감
    CFLAG:COUNT:696 -= 1
ENDIF
;Ｂ敏感
IF TALENT:COUNT:B민감
    CFLAG:COUNT:696 += 1
ENDIF
;Ｂ鈍感
IF TALENT:COUNT:B둔감
    CFLAG:COUNT:696 -= 1
ENDIF
;爆乳
IF TALENT:COUNT:폭유
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 += 5
ENDIF
;ふたなり
IF TALENT:COUNT:후타나리
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:697 += 5
ENDIF
;懐卵
IF TALENT:COUNT:회란
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 += 5
ENDIF
;寄生
IF TALENT:COUNT:기생
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 += 5
ENDIF
;恋慕
IF TALENT:COUNT:150
    CFLAG:COUNT:695 += 5
ENDIF
;妄信
IF TALENT:COUNT:151
    CFLAG:COUNT:695 += 5
ENDIF
;親愛
IF TALENT:COUNT:152
    CFLAG:COUNT:695 += 5
ENDIF
;相愛
IF TALENT:COUNT:153
    CFLAG:COUNT:695 += 5
ENDIF
;狂気
IF TALENT:COUNT:158
    CFLAG:COUNT:695 -= 5
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 += 5
    CFLAG:COUNT:699 -= 5
ENDIF
;服従
IF TALENT:COUNT:160
    CFLAG:COUNT:695 += 5
ENDIF
;烙印
IF TALENT:COUNT:161
    CFLAG:COUNT:695 += 5
ENDIF
;隷属
IF TALENT:COUNT:162
    CFLAG:COUNT:695 += 5
ENDIF
;使い魔
IF TALENT:COUNT:164
    CFLAG:COUNT:695 += 5
ENDIF
;淫乱
IF TALENT:COUNT:170
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;淫核／淫茎
IF TALENT:COUNT:171
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;淫壷
IF TALENT:COUNT:172
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;淫尻
IF TALENT:COUNT:173
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;淫乳
IF TALENT:COUNT:174
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;即落ち
IF TALENT:COUNT:179
    CFLAG:COUNT:696 += 5
    CFLAG:COUNT:698 -= 5
    CFLAG:COUNT:699 += 5
ENDIF
;吸血鬼
IF TALENT:COUNT:205
    CFLAG:COUNT:697 += 5
    CFLAG:COUNT:698 += 5
ENDIF
;機械
IF TALENT:COUNT:206
    CFLAG:COUNT:696 -= 5
    CFLAG:COUNT:699 -= 5
ENDIF
;刻印
;苦痛刻印
IF MARK:COUNT:고통각인
    CFLAG:COUNT:695 += MARK:COUNT:고통각인 * 5
    CFLAG:COUNT:698 -= MARK:COUNT:고통각인 * 5
ENDIF
;快楽刻印
IF MARK:COUNT:쾌락각인
    CFLAG:COUNT:696 += MARK:COUNT:쾌락각인 * 2
    CFLAG:COUNT:699 += MARK:COUNT:쾌락각인 * 2
ENDIF
;屈服刻印
IF MARK:COUNT:굴복각인
    CFLAG:COUNT:695 += MARK:COUNT:굴복각인 * 2
ENDIF
;反発刻印
IF MARK:COUNT:반발각인
    CFLAG:COUNT:695 += MARK:COUNT:반발각인 * 10
ENDIF
RETURN 0

;=======================================;
;JUDGE_WORKSHOP_CONGENIAL 工房相性確認
;ARG引数
; 0 自分のCHARANUM番号
; 1 相手のCHARANUM番号
;戻り値
;LOCAL:0 相性による加算値の合計
;=======================================;
@JUDGE_WORKSHOP_CONGENIAL, ARG:0, ARG:1
LOCAL:0 = 0
;相手のレズっ気と自分のレズ中毒を見る
LOCAL:0 += (ABL:(ARG:0):레즈중독 * ABL:(ARG:1):레즈끼)
;相手のＢＬっ気と自分のＢＬ中毒を見る
LOCAL:0 += (ABL:(ARG:0):BL중독 * ABL:(ARG:1):BL끼)
;自分が母乳体質で相手が幼児か幼稚か幼児退行なら自分の噴乳中毒を見る
SIF TALENT:(ARG:0):모유체질 && (TALENT:(ARG:1):유아 || TALENT:(ARG:1):유치 || TALENT:(ARG:1):159)
    LOCAL:0 += ABL:(ARG:0):분유중독 * 2
;自分が幼児か幼稚か幼児退行で相手が母乳体質なら加算する
SIF TALENT:(ARG:1):모유체질 && (TALENT:(ARG:0):유아 || TALENT:(ARG:0):유치 || TALENT:(ARG:0):159)
    LOCAL:0 += 5
;相手がドＭかマゾかマゾっ気ありなら自分のドＳとサドとサドっ気Lvのそれぞれにより加算する
IF ABL:(ARG:1):마조끼 || TALENT:(ARG:1):마조 || TALENT:(ARG:1):178
    SIF TALENT:(ARG:0):177
        LOCAL:0 += 5
    SIF TALENT:(ARG:0):새드
        LOCAL:0 += 5
    LOCAL:0 += ABL:(ARG:0):새드끼
ENDIF
;相手がドＳかサドかサドっ気ありなら自分のドＭとマゾとマゾっ気Lvのそれぞれにより加算する
IF ABL:(ARG:1):새드끼 || TALENT:(ARG:1):새드 || TALENT:(ARG:1):177
    SIF TALENT:(ARG:0):178
        LOCAL:0 += 5
    SIF TALENT:(ARG:0):마조
        LOCAL:0 += 5
    LOCAL:0 += ABL:(ARG:0):마조끼
ENDIF
;相手がオトコかふたなりなら自分の精液中毒を見る
SIF TALENT:(ARG:1):후타나리 || TALENT:(ARG:1):남자
    LOCAL:0 += ABL:(ARG:0):정액중독 * 2
;相手がオトコでないかふたなりなら自分の射精中毒を見る
SIF TALENT:(ARG:1):후타나리 || (TALENT:(ARG:1):남자 == 0)
    LOCAL:0 += ABL:(ARG:0):정액중독 * 2
;相手が巨乳か爆乳なら自分の射精中毒を見る
SIF TALENT:(ARG:1):거유 || TALENT:(ARG:1):폭유
    LOCAL:0 += ABL:(ARG:0):정액중독
SIF TALENT:MASTER:Debug && (FLAG:1109 & 1) && (FLAG:1109 & 4)
    PRINTFORML ;;; %CALLNAME:(ARG:0)%의 %조사처리(CALLNAME:(ARG:1), "과")%의 육체상성치：{LOCAL:0}
RETURN LOCAL:0

;=======================================;
;JUDGE_WORKSHOP_ENVIRONMENT 工房環境確認
;ARG引数
; 0 自分のCHARANUM番号
; 1 変動させる判定値(実値)
;戻り値
;LOCAL:0 変動後の判定値(実値)
;=======================================;
@JUDGE_WORKSHOP_ENVIRONMENT, ARG:0, ARG:1
LOCAL:0 = ARG:1
;エロムードにより値が割り増し
LOCAL:0 *= (FLAG:1133 + FLAG:1130)
LOCAL:0 /= FLAG:1130
;レズ中毒ならレズっ気により値が割り増し
IF ABL:(ARG:0):레즈중독
    LOCAL:0 *= ((FLAG:1146 * (ABL:(ARG:0):레즈중독 * 2 + 8) + (FLAG:1130 * 10)) / 10)
    LOCAL:0 /= FLAG:1130
ENDIF
;ＢＬ中毒ならＢＬっ気により値が割り増し
IF ABL:(ARG:0):BL중독
    LOCAL:0 *= ((FLAG:1147 * (ABL:(ARG:0):BL중독 * 2 + 8) + (FLAG:1130 * 10)) / 10)
    LOCAL:0 /= FLAG:1130
ENDIF
;幼児か幼稚か幼児退行なら母乳体質者により値が割り増し
IF TALENT:(ARG:0):유아 || TALENT:(ARG:0):유치 || TALENT:(ARG:0):159
    LOCAL:0 *= (FLAG:1142 + FLAG:1130)
    LOCAL:0 /= FLAG:1130
ENDIF
;精液中毒ならペニスにより値が割り増し
IF ABL:(ARG:0):정액중독
    LOCAL:0 *= ((FLAG:1148 * (ABL:(ARG:0):정액중독 * 2 + 8) + (FLAG:1130 * 10)) / 10)
    LOCAL:0 /= FLAG:1130
ENDIF
;射精中毒なら女性器と巨乳・爆乳により値が割り増し
IF ABL:(ARG:0):사정중독
    LOCAL:0 *= (((FLAG:1145 + FLAG:1149) * (ABL:(ARG:0):사정중독 * 2 + 8) + (FLAG:1130 * 10)) / 10)
    LOCAL:0 /= FLAG:1130
ENDIF
RETURN LOCAL:0
